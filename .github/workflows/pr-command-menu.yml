name: PR Command Menu

on:
  pull_request:
    types: [opened]

permissions:
  pull-requests: write
  issues: write
  contents: read

jobs:
  create-command-menu:
    runs-on: ubuntu-latest
    steps:
      - name: ã‚³ãƒãƒ³ãƒ‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚³ãƒ¡ãƒ³ãƒˆæŠ•ç¨¿
        uses: actions/github-script@v7
        with:
          script: |
            const commandMenu = `
            ## ğŸ¤– GitHub Actions ã‚³ãƒãƒ³ãƒ‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼

            ã“ã®ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã§ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã§ãã¾ã™ï¼š

            ### ğŸš€ ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯å®Ÿè¡Œ

            **Simple Echo ã‚’å®Ÿè¡Œ:**
            [![Simple Echo å®Ÿè¡Œ](https://img.shields.io/badge/ğŸš€_Simple_Echo-å®Ÿè¡Œ-brightgreen?style=for-the-badge)](https://github.com/${context.repo.owner}/${context.repo.repo}/actions/workflows/simple-echo.yml)

            â†³ ä¸Šã®ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ â†’ ã€ŒRun workflowã€â†’ ã€ŒRun workflowã€ã§å®Ÿè¡Œ

            ### ğŸ“‹ ã‚³ãƒ¡ãƒ³ãƒˆã‚³ãƒãƒ³ãƒ‰

            | ã‚³ãƒãƒ³ãƒ‰ | èª¬æ˜ | å®Ÿè¡Œæ–¹æ³• |
            |---------|------|---------|
            | \`/echo\` | åŸºæœ¬çš„ãªã‚¨ã‚³ãƒ¼ãƒ†ã‚¹ãƒˆ | ã‚³ãƒ¡ãƒ³ãƒˆã« \`/echo\` ã¨å…¥åŠ› |
            | \`/test\` | ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ | ã‚³ãƒ¡ãƒ³ãƒˆã« \`/test\` ã¨å…¥åŠ› |
            | \`/deploy\` | ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ—ãƒ­ã‚»ã‚¹ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ | ã‚³ãƒ¡ãƒ³ãƒˆã« \`/deploy\` ã¨å…¥åŠ› |
            | \`/simple-echo\` | Simple Echo ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®å®Ÿè¡Œ | ã‚³ãƒ¡ãƒ³ãƒˆã« \`/simple-echo\` ã¨å…¥åŠ› |

            ### ğŸ¯ ã‚¯ã‚¤ãƒƒã‚¯å®Ÿè¡Œãƒœã‚¿ãƒ³

            ä»¥ä¸‹ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã‚³ãƒ¡ãƒ³ãƒˆã«è²¼ã‚Šä»˜ã‘ã‚‹ã ã‘ã§å®Ÿè¡Œã§ãã¾ã™ï¼š

            **Echo ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ:**
            \`\`\`
            /echo
            \`\`\`

            **ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ:**
            \`\`\`
            /test
            \`\`\`

            **Simple Echoå®Ÿè¡Œ:**
            \`\`\`
            /simple-echo
            \`\`\`

            **ãƒ‡ãƒ—ãƒ­ã‚¤å®Ÿè¡Œ:**
            \`\`\`
            /deploy
            \`\`\`

            ### ğŸ”„ å†å®Ÿè¡Œæ–¹æ³•

            1. **Checksã‚¿ãƒ–ã‹ã‚‰**: ã“ã®PRã®ã€ŒChecksã€ã‚¿ãƒ– â†’ å®Ÿè¡Œã—ãŸã„ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ â†’ ã€ŒRe-runã€
            2. **ã‚³ãƒ¡ãƒ³ãƒˆã§**: ä¸Šè¨˜ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ¡ãƒ³ãƒˆæŠ•ç¨¿
            3. **ç›´æ¥å®Ÿè¡Œ**: ä¸Šã®ç·‘ã®ãƒœã‚¿ãƒ³ã‹ã‚‰ Actions ãƒšãƒ¼ã‚¸ã¸ç§»å‹•

            ---
            ğŸ’¡ **ä½¿ã„æ–¹:** ä¸Šè¨˜ã®ã‚³ãƒãƒ³ãƒ‰ã®ã„ãšã‚Œã‹ã‚’ã“ã®ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ã‚³ãƒ¡ãƒ³ãƒˆæ¬„ã«æŠ•ç¨¿ã™ã‚‹ã¨ã€GitHub Actions ãŒè‡ªå‹•å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚

            âš¡ **å®Ÿè¡ŒçŠ¶æ³:** ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œä¸­ã¯ ğŸ‘€ ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã€å®Œäº†æ™‚ã¯ âœ… ã¾ãŸã¯ âŒ ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã§çµæœã‚’ãŠçŸ¥ã‚‰ã›ã—ã¾ã™ã€‚
            `;

            await github.rest.issues.createComment({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: context.payload.pull_request?.number || context.payload.number,
              body: commandMenu
            });

      - name: æˆåŠŸé€šçŸ¥
        run: |
          echo "âœ… ã‚³ãƒãƒ³ãƒ‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’ PR #${{ github.event.pull_request.number || github.event.number }} ã«æŠ•ç¨¿ã—ã¾ã—ãŸ"
